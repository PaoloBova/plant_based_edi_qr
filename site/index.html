<!doctype html>
<html lang="en" class="h-full scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Plant-based Edinburgh</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body class="bg-gradient-to-b from-slate-50 to-slate-100 text-lg md:text-xl leading-relaxed">
  <main class="w-full max-w-2xl mx-auto space-y-12 px-4">
    <section class="max-w-3xl mx-auto pt-24 px-4 text-center prose prose-lg">
      <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6">
        Tell Edinburgh Council to go <span class="text-emerald-600">plant-based</span>
      </h1>
    </section>
    <!-- Email generation form -->
    <section class="w-full max-w-md md:max-w-xl mx-auto bg-white rounded-xl shadow-lg p-6 space-y-4 text-lg md:text-xl">
      <h2 class="text-xl font-semibold text-center">Email your local councillors in 1 minute</h2>
      <p class="text-center text-sm md:text-base text-gray-700">
        Learn more and join the campaign at 
        <a href="https://www.plantbasedcouncils.org" target="_blank" rel="noopener" class="text-emerald-600 hover:underline">
          plantbasedcouncils.org
        </a>.
      </p>
      <form id="email-form" class="space-y-4" novalidate>
        <!-- optional‐fields notice -->
        <p class="text-sm md:text-base text-gray-700 italic">
          All fields are optional and will prepopulate your email. We don’t store any of your details or send emails automatically.
        </p>
        <div>
          <label for="full-name" class="block text-base md:text-lg font-medium text-gray-700">Full Name</label>
          <input
            type="text"
            id="full-name"
            name="full-name"
            aria-describedby="full-name-helper full-name-error"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg"
            required
          >
          <p id="full-name-helper" class="text-xs md:text-sm text-gray-600 mt-1">
            Shown in the signature so your councillor knows who it’s from.
          </p>
          <p id="full-name-error" class="text-xs md:text-sm text-red-600 mt-1 hidden" role="alert"></p>
        </div>
        <div>
          <label for="address" class="block text-base md:text-lg font-medium text-gray-700">Address</label>
          <input
            type="text"
            id="address"
            name="address"
            aria-describedby="address-helper address-error"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg"
            required
          >
          <p id="address-helper" class="text-xs md:text-sm text-gray-600 mt-1">
            House number + street + postcode — helps confirm you live in their ward.
          </p>
          <p id="address-error" class="text-xs md:text-sm text-red-600 mt-1 hidden" role="alert"></p>
        </div>
        <div>
          <label for="ward-select" class="block text-base md:text-lg font-medium text-gray-700">
            Select Your Ward
          </label>
          <p id="ward-helper" class="text-xs md:text-sm text-gray-600 mt-1">
            We will find your councillors for you.
          </p>
          <div class="flex justify-center mt-2">
            <a
              href="https://boundaries.scot/"
              target="_blank"
              rel="noopener"
              class="inline-flex items-center px-6 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 font-medium shadow-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
            >
              Find your ward
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 ml-2 -mr-1"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                role="img"
                aria-labelledby="extLinkTitle"
              >
                <title id="extLinkTitle">Opens in new tab</title>
                <path d="M14 3h7v7M21 3l-8 8" />
                <rect x="3" y="8" width="13" height="13" rx="2" ry="2" />
              </svg>
            </a>
          </div>
          <select id="ward-select" name="ward" class="mt-4 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg">
            <option value="" disabled selected>Choose a ward…</option>
            <!-- JS will populate options -->
          </select>
        </div>
        <div>
          <label for="personal-message" class="block text-base md:text-lg font-medium text-gray-700">Personalised Message</label>
          <textarea
            id="personal-message"
            name="personal-message"
            rows="4"
            aria-describedby="personal-message-helper personal-message-error"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-base md:text-lg"
            required
          ></textarea>
          <p id="personal-message-helper" class="text-xs md:text-sm text-gray-600 mt-1 mb-1">
            Introduce yourself and tell them why this issue matters to you. We’ll add a polite greeting and closing automatically. This will be the first paragraph.
          </p>
          <p id="personal-message-error" class="text-xs md:text-sm text-red-600 mt-1 hidden" role="alert"></p>
        </div>
        <div>
          <label class="inline-flex items-center space-x-2">
            <input
              type="checkbox"
              id="include-default-paras"
              checked
              class="h-4 w-4 text-emerald-600 border-gray-300 rounded"
            >
            <span class="text-sm text-gray-700">Include our email template</span>
          </label>
        </div>

        <!-- honeypot to trap bots -->
        <input type="text" name="hp" id="hp" autocomplete="off" tabindex="-1" class="hidden">

        <!-- per-councillor email queue -->
        <div id="email-queue" class="space-y-2 mt-4 hidden">
          <p id="email-progress" class="text-sm text-gray-700"></p>
          <div id="email-buttons" class="space-y-2"></div>
        </div>
      </form>
    </section>
    <!-- Chat container -->
    <section id="chat-wrapper" hidden>
      <div id="chat-container"
           class="w-full max-w-md md:max-w-xl mx-auto bg-white rounded-xl shadow-xl p-6 space-y-4 text-lg md:text-xl">
        <h2 class="text-lg font-medium mb-2">Need help personalising your message?</h2>
        <div id="chat-window" class="flex flex-col items-start gap-4 h-80 overflow-y-auto p-4 bg-gray-50 rounded-md shadow-inner">
          <!-- Messages will appear here -->
        </div>
        <form id="chat-form" class="flex items-center space-x-2">
          <input
            id="chat-input"
            type="text"
            maxlength="1000"
            placeholder="Type your message..."
            class="flex-grow p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500"
            required
          />
          <p id="chat-error" class="text-xs text-red-600 mt-1 hidden">
            Input too long; maximum 1000 characters allowed.
          </p>
          <button
            type="submit"
            class="px-6 py-3 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 shadow-md disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Send
          </button>
        </form>
      </div>
    </section>
  </main>
  <script type="module" src="./mailto.js"></script>
  <script type="module" src="./main.js"></script>
</body>
</html>
